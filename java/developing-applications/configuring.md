---
synopsis: >
  This section describes how to configure CAP Java applications.

status: released
uacp: Used as link target from Help Portal at https://help.sap.com/products/BTP/65de2977205c403bbc107264b8eccf4b/9186ed9ab00842e1a31309ff1be38792.html
---

# Configuring Applications
<style scoped>
  h1:before {
    content: "Java"; display: block; font-size: 60%; margin: 0 0 .2em;
  }
</style>


## Profiles and Properties

This section describes how to configure applications.
CAP Java applications can fully leverage [Spring Boot's](../spring-boot-integration) capabilities for [Externalized Configuration](https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config).
This enables you to define multiple **configuration profiles** for different scenarios, like local development and cloud deployment.

For a first introduction, have a look at our [sample application](https://github.com/sap-samples/cloud-cap-samples-java) and the [configuration profiles](https://github.com/SAP-samples/cloud-cap-samples-java/blob/master/srv/src/main/resources/application.yaml) we added there.

Now, that you're familiar with how to configure your application, start to create your own application configuration. See the full list of [CDS properties](properties) as a reference.

### Production Profile { #production-profile }

When running your application in production, it makes sense to strictly disable some development-oriented features.
The production profile configures a set of selected property defaults, recommended for production deployments, at once.
By default the production profile is set to `cloud`. To specify a custom production profile, set `cds.environment.production.profile` to a Spring profile used in your production deployments.

::: tip Production profile = `cloud`
The Java Buildpacks set the `cloud` profile for applications by default.
Other active profiles for production deployments are typically set using the environment variable `SPRING_PROFILES_ACTIVE` on your application in your deployment descriptors (`mta.yaml`, Helm charts, etc.).
:::

Property defaults adjusted with the production profile are the following:

- Index Page is disabled: `cds.index-page.enabled` is set to `false`
- Mock Users are strictly disabled: `cds.security.mock.enabled` is set to `false`

Note, that explicit configuration in the application takes precedence over property defaults from the production profile.

## Using SAP Java Buildpack { #buildpack }

In SAP BTP Cloud Foundry environment, the Java runtime that is used to run your application is defined by the so-called [buildpack](https://docs.cloudfoundry.org/buildpacks/).
For CAP applications, we advise you to use the [SAP Java Buildpack 2](https://help.sap.com/docs/btp/sap-business-technology-platform/sap-jakarta-buildpack).
CAP applications built with Spring Boot don't require any specific configuration for the buildpack and run using [Java Main](https://help.sap.com/docs/btp/sap-business-technology-platform/java-main) runtime by default.

To configure the buildpack for Java 21 with SapMachine JRE, add the following lines to your `mta.yaml` right under your Java service definition:

::: code-group
```yaml [mta.yaml]
parameters:
  buildpack: sap_java_buildpack_jakarta
properties:
  JBP_CONFIG_COMPONENTS: "jres: ['com.sap.xs.java.buildpack.jre.SAPMachineJRE']"
  JBP_CONFIG_SAP_MACHINE_JRE: '{ version: 21.+ }'
```
:::

:::warning SAP Business Application Studio
If you develop your application in SAP Business Application Studio and Java 21 is not available there, use the Java 17, instead.
:::

## Configuring Code Generation for Typed Access {#codegen-config}

The [generated interfaces for typed access](../cds-data#generated-accessor-interfaces) are generated by CAP at each build 
by the [goal `cds:generate`](/java/assets/cds-maven-plugin-site/generate-mojo.html) of the [CDS Maven Plugin](/java/assets/cds-maven-plugin-site/plugin-info.html). 
Each time your application is built, these interfaces are regenerated so you should exclude them from your version control system.

You configure this goal just like any other Maven plugin via its configuration options via your application's POM. For example: 

```xml [pom.xml]
<execution>
    <id>cds.generate</id>
    <goals>
        <goal>generate</goal>
    </goals>
    <configuration>
        <basePackage>cds.gen</basePackage>
        ...
    </configuration>
</execution>
```

### Package for Generated Code

The option [`basePackage`](/java/assets/cds-maven-plugin-site/generate-mojo.html#basePackage) can be used to specify package as the root for generated code. The underlying package structure will reflect namespaces defined in your CDS model.

### Filter for CDS Entities

By default, complete model of your application is generated including all imported or re-used models. 
You can use options [`includes`](/java/assets/cds-maven-plugin-site/generate-mojo.html#includes) and [`excludes`](/java/assets/cds-maven-plugin-site/generate-mojo.html#excludes) to specify the part of your overall model that is subject to code generation. Both inclusion and exclusion can be used together, inclusion evaluated first, then exclusion filter out included set of entities.

These options use patterns that are applied on the fully qualified names of the entities in CDS models. For example, the pattern `my.bookshop.*` will cover all definitions with namespace `my.bookshop` and the pattern `my.bookshop.**` will cover all definitions with fully qualified name starting with `my.bookshop`. 

:::warning Cross-namespace references are not resolved
Options `includes` and `excludes` are simple filters. If included parts of your model reference types from the excluded area, the resulting code will not compile.
:::

### Style of Interfaces

By default, the accessor interfaces provide the setter and getter methods inspired by the JavaBeans specification.

Following example uses accessor interfaces that have been generated with the default (JavaBeans) style:

```java
    Authors author = Authors.create();
    author.setName("Emily Brontë");

    Books book = Books.create();
    book.setAuthor(author);
    book.setTitle("Wuthering Heights");
```

Alternatively, you can generate accessor interfaces in _fluent style_. In this mode, the getter methods are named after the property names. To enable fluent chaining, the setter methods return the accessor interface itself.

Following is an example of the fluent style:

```java
   Authors author = Authors.create().name("Emily Brontë");
   Books.create().author(author).title("Wuthering Heights");
```

The generation mode is configured by the option [`methodStyle`](/java/assets/cds-maven-plugin-site/generate-mojo.html#methodStyle). The selected style affects all entities and event contexts in your services. The default value is `BEAN`, which represents JavaBeans-style interfaces.

Once, when starting a project, decide on the style of the interfaces that is best for your team and project. We recommend the default JavaBeans style.

The way the interfaces are generated determines only how data is accessed by custom code. It does not affect how the data is represented in memory and handled by the CAP Java runtime.

Moreover, it doesn't change the way how event contexts, delivered by CAP, look like. Such interfaces from CAP are always modelled in the default JavaBeans style.

### Code Generation Features

Other options in this goal enable or disable certain features that change the way generated code looks in a certain aspect. These changes can be incompatible with the existing code and require manual adaptation.

- [`strictSetters`](/java/assets/cds-maven-plugin-site/generate-mojo.html#strictSetters)
    
  This switch changes the signature of the setter methods in typed access interfaces so that they require concrete type instead of generic `Map` interface. 
  For example, instead of the following:
    
  ```java
  void setManager(Map<String, ?> manager);
  ```  
  you get the following: 

  ```java
  void setManager(Manager manager);
  ```
  It does not introduce any additional type checks at runtime, the correctness of the assignment is checked only at the time of compilation.

- [`interfacesForAspects`](/java/assets/cds-maven-plugin-site/generate-mojo.html#interfacesForAspects)

  If your entity is modelled with the [composition of aspects](/cds/cdl#with-named-targets), the generated interfaces always reference original aspect as type for setters and getters.
  When this switch is enabled, code generator will use type generated by the compiler instead of type of the aspect itself and will include methods to fetch keys, for example.

  :::warning Limitations
  This is supported only for the named aspects (inline targets are not supported) and does not respect all possible options how such entities might be exposed by services.
  :::

- [`betterNames`](/java/assets/cds-maven-plugin-site/generate-mojo.html#betterNames)
  
  CDS models from external sources might include elements that have some special characters in their names or include elements that clash with Java keywords. Such cases always can be solved with [renaming features](/java/cds-data#renaming-elements-in-java) provided by code generator, but in case of large models, this is tedious.
  This switch enables following conversions on the names coming from CDS models to reduce the amount of renaming that needs to be done:

  - Names from CDS model that are Java keywords are suffixed with `_`. 
  - Names from CDS model that use characters that are not valid as Java identifiers, are replaced by `_`. This, however, might lead to a conflicts between names that yield the same name in Java.
  - Characters `/` and `$` behave as a separator for the name during case conversions, similar to `_` and `.`. For example, `GET_MATERIAL` yields `GetMaterial` (or `getMaterial` for attributes and methods). The same now applies for the names with `/`, for example, name `/DMO/GET_MATERIAL` will be converted to `DmoGetMaterial`.  
  - Leading `_` will remain in the name after conversions. This supports convention where association and its foreign key have names like `_assoc` and `assoc`.

:::warning Check migration guides!
In major releases of CAP Java, some of these switches can be made new default and some other switches might be removed. This might introduce compile errors
in your application that needs to be fixed.
:::

See [Maven Plugin Documentation](/java/assets/cds-maven-plugin-site/generate-mojo.html) for actual status of deprecation and switches that are not described here. {.learn-more}

### Annotation Detail Level

Option [`annotationDetailLevel`](/java/assets/cds-maven-plugin-site/generate-mojo.html#annotationDetailLevel) lets you choose the amount of the details for the Java annotation [`@Generated`](https://docs.oracle.com/en/java/javase/21/docs/api/java.compiler/javax/annotation/processing/Generated.html) added to each interface. This annotation has no effect at runtime.

Following levels of the details are available:
- `MINIMAL` - only annotation is added, no additional information is added.

   ```java
    @CdsName("service.Entity")
    @Generated("cds-maven-plugin")
    public interface Entity extends CdsData {  }
   ```

- `FULL` - annotation contains date and time of the generation.

  ```java
  @CdsName("service.Entity")
  @Generated(
      value = "cds-maven-plugin",
      date = "9999-12-31T23:59:59.999999Z",
      comments = ""
  )
  public interface Entity extends CdsData {  }
  ```

- `NONE` - annotation is not added at all. This is not recommended.